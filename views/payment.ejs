<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Payment | ResFinder</title>

  <!-- Favicon -->
  <link rel="shortcut icon" href="./favicon.svg" type="image/svg+xml">

  <!-- Custom CSS link -->
  <link rel="stylesheet" href="style.css">

  <!-- Google Font link -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&family=Rubik:wght@400;500;600;700&family=Shadows+Into+Light&display=swap"
    rel="stylesheet">

  <!-- Icon link -->
  <link rel="icon" href="./images/logo.jpg" type="image/svg+xml" sizes="16x16">

  <!-- Include Font Awesome CSS -->
  <script src="https://kit.fontawesome.com/e3f341baec.js" crossorigin="anonymous"></script>

  <!-- Preload images -->
  <link rel="preload" as="image" href="./assets/images/hero-banner.png" media="min-width(768px)">
  <link rel="preload" as="image" href="./images/hero-banner-bg.png" media="min-width(768px)">
  <link rel="preload" as="image" href="./images/hero-bg.jpg">

  <!-- Responsive Styles -->
  <style>
    /* Apply mobile styles here */
    @media only screen and (max-width: 768px) {
      body {
        font-size: 14px; /* Adjust font size for smaller screens */
      }

      /* Add more styles as needed for mobile devices */
      /* For example: */
      .hero-title {
        font-size: 24px; /* Adjust hero title size for smaller screens */
      }
    }
    
    .btn-hover {
      margin: 10px;
    }

    .btnn {
      border: none;
      color: white;
      padding: 15px 32px;
      text-align: center;
      text-decoration: none;
      display: inline-block;
      font-size: 16px;
      margin: 4px 2px;
      cursor: pointer;
      border-radius: 5px;
    }

    #footer {
      text-align: center;
      width: 100%;
      background-color: rgb(252, 152, 0);
      color: white;
    }

    #find{
        margin: 5px 2px 10px 2px;
        padding: 5px;
        width:50px;
        height:50px;
        bottom:40px;
        right:40px;
      }

  </style>
</head>
<body> 
  <% if (user != null) { %>
    <!-- Header for Logged In User -->
    <header class="header" data-header>
      <div class="container">
        <h1>
          <a href="/index" class="logo">Restaurant Reservation <span class="span"> . <%= user %></span></a>
        </h1>
        
        <!-- Navigation -->
        <nav class="navbar" data-navbar>
          <ul class="navbar-list">
            <li class="nav-item">
              <a href="/index" class="navbar-link" data-nav-link>Home</a>
            </li>
            <li class="nav-item">
              <a href="/index#homesection" class="navbar-link" data-nav-link>Restaurant</a>
            </li>
            <li class="nav-item">
              <a href="/payment" class="navbar-link" data-nav-link>Details</a>
            </li>
          </ul>
        </nav>
        
        <!-- User Actions -->
        <button class="btn btn-hover"><a href="logout">Logout</a></button>
        <button class="nav-toggle-btn" aria-label="Toggle Menu" data-menu-toggle-btn>
          <span class="line top"></span>
          <span class="line middle"></span>
          <span class="line bottom"></span>
        </button>
      </div>
    </header>
  <% } else { %>
    <!-- Header for Guest User -->
    <header class="header" data-header>
      <div class="container">
        <h1>
          <a href="/index" class="logo">Restaurant Reservation<span class="span">.</span></a>
        </h1>
        
        <!-- Navigation -->
        <nav class="navbar" data-navbar>
          <ul class="navbar-list">
            <li class="nav-item">
              <a href="/index" class="navbar-link" data-nav-link>Home</a>
            </li>
          </ul>
        </nav>
        
        <!-- Guest User Actions -->
        <button class="btn btn-hover"><a href="login">Login</a></button>
        <button class="nav-toggle-btn" aria-label="Toggle Menu" data-menu-toggle-btn>
          <span class="line top"></span>
          <span class="line middle"></span>
          <span class="line bottom"></span>
        </button>
      </div>
    </header>
  <% } %>

  <!-- Hero Section -->
    <section class="hero" id="home" style="background-image: url('./images/hero-bg.jpg')">
      <div class="container">
        <% userList.forEach(function(data) { %>
        <div class="hero-content">
          <p class="hero-subtitle">Welcome <%= user %></p>
          <p class="hero-text">Reservation Details.</p>
          <div class="signup-form">
            <% if (data.fullname) { %>
            <!-- User details -->
            <div class="info-container">
              <div class="col-1">
                Full Name: 
              </div>
              <div class="col-2">
                <%= data.fullname %>
              </div>
            </div>

            <div class="info-container">
              <div class="col-1">
                Email: 
              </div>
              <div class="col-2">
                <%= data.email %>
              </div>
            </div>

            <div class="info-container">
              <div class="col-1">
                Phone No: 
              </div>
              <div class="col-2">
                <%= data.phone %>
              </div>
            </div>

            <div class="info-container">
              <div class="col-1">
                Restaurant: 
              </div>
              <div class="col-2">
                <%= data.restaurant %>
              </div>
            </div>

            <div class="info-container">
              <div class="col-1">
                Reservation Date: 
              </div>
              <div class="col-2">
                <%= data.date %>
              </div>
            </div>

            <div class="info-container">
              <div class="col-1">
                Reservation Time: 
              </div>
              <div class="col-2">
                <%= data.time %>
              </div>
            </div>

            <% if (data.table) { %>
            <div class="info-container">
              <div class="col-1">
                Table: 
              </div>
              <div class="col-2">
                <% if (data.table == 'table1') { %> Table 1
                <% } else if (data.table == 'table2') { %> Table 2
                <% } else if (data.table == 'table3') { %> Table 3
                <% } else if (data.table == 'table4') { %> Table 4
                <% } else if (data.table == 'table5') { %> Table 5
                <% } %>
              </div>
            </div> <% } %>

            <div class="info-container">
              <div class="col-1">
                Menus: 
              </div>
              <div class="col-2">
                <% for (var i = 0; i < data.menu.length; i++) { %>
                <%= data.menu[i] %> RM<%= data.price[i] %><br>
                <% } %>
              </div>
            </div>

            <% var total = 0; var deposit = 20; for (var i = 0; i < data.menu.length; i++) { total += parseFloat(data.price[i]); } %>

            <% var totalPriceWithDeposit = total + deposit; %>

            <div class="info-container">
              <div class="col-1">
                Total Price:
              </div>
              <div class="col-2">
                RM<%= total.toFixed(2) %>
              </div>
            </div>

            <div class="info-container">
              <div class="col-1">
                Price Includes Depo (RM20):
              </div>
              <div class="col-2">
                RM<%= totalPriceWithDeposit.toFixed(2) %>
              </div>
            </div>

            <% } else { %>
            <h1>PLEASE START BOOKING BY CHOOSING THE CATEGORY</h1>
            <% } %>
          </div>

          <div  class="btn-details">
           
            
          </div>
        </div>
        <% }); %>

        <!-- Payment Form -->
        <% var newtotal = 0; %>
        <% if (total) { %>
          <% total = parseFloat(total) * 100; %>
          <% newtotal = total.toFixed(2); %>
        <% } %>

        <form action="payment" method="POST">
          <script
            src="//checkout.stripe.com/v2/checkout.js"
            class="stripe-button"
            data-key="<%= key %>"
            data-amount="<%= newtotal %>"
            data-currency="myr"
            data-name="<%= user %>"
            data-description="Reserve your table"
            data-locale="auto">
          </script>
        </form>
    </section>
</body>
</html>
